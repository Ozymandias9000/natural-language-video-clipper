# Video Clipper UI Design

## Overview

Web-based UI for the video-clipper tool. Displays a scrubbable thumbnail timeline of a video with search matches highlighted. Users can select/deselect clips and export them individually or stitched together.

## Aesthetic Direction

**Concept: "Film Editor's Light Table"**

Inspired by traditional film editing where editors view strips of film against illumination.

- **Theme**: Dark cinematic - charcoal blacks (#0a0a0a) with warm amber accents (#f59e0b)
- **Typography**: JetBrains Mono for timestamps, Instrument Sans for UI text
- **Key detail**: Thumbnails glow when selected, like backlit film negatives
- **Motion**: Smooth scrubbing with momentum, clips expand on hover with subtle lift

## Architecture

```
┌─────────────┐      PyBridge       ┌─────────────┐
│  Bun/Elysia │ ◄─────────────────► │   Python    │
│  (API + UI) │                     │   Worker    │
└─────────────┘                     └─────────────┘
       │
       │ HTTP
       ▼
   Browser (React 19)
```

**Stack:**

- Frontend: React 19, Vite, Tailwind CSS, Motion (Framer Motion)
- Backend: Bun + Elysia
- Python bridge: pybridge (https://github.com/marcj/pybridge)
- Video: Native HTML5 `<video>`, ffmpeg for thumbnails/export

### PyBridge API

```typescript
interface VideoClipperAPI {
  load_video(path: string): {
    duration: number;
    fps: number;
    width: number;
    height: number;
  };
  build_index(video: string): { status: string };
  search(
    query: string,
    top_k: number
  ): { start: number; end: number; score: number }[];
  get_thumbnail(time: number): string; // base64
  export_clips(
    clips: { start: number; end: number }[],
    stitch: boolean
  ): { output: string };
}
```

### File Structure

```
src/video_clipper/
├── bridge.py              ← PyBridge-compatible API functions

ui/
├── package.json           ← Bun + Elysia + React + pybridge
├── src/
│   ├── server/
│   │   ├── index.ts       ← Elysia app entry
│   │   ├── python.ts      ← PyBridge setup
│   │   └── routes/
│   │       ├── video.ts   ← Video streaming, thumbnails
│   │       ├── search.ts  ← Search endpoint
│   │       └── export.ts  ← Export endpoint
│   ├── client/
│   │   ├── App.tsx
│   │   ├── components/
│   │   │   ├── VideoPlayer.tsx
│   │   │   ├── Timeline.tsx
│   │   │   ├── ClipList.tsx
│   │   │   └── SearchBar.tsx
│   │   └── hooks/
│   │       └── useApi.ts
│   └── entry-client.tsx
```

## UI Layout

```
┌─────────────────────────────────────────────────────┐
│  [Search bar]                        [Export ▼]    │
├─────────────────────────────────────────────────────┤
│                                                     │
│              [ Video Player ]                       │
│                                                     │
├─────────────────────────────────────────────────────┤
│ ◀ [====|###|====|###|==========|###|====] ▶        │  ← Timeline
│   0:00                                      12:34   │
├─────────────────────────────────────────────────────┤
│  ☑ Clip 1 (0:32-0:45)  ☑ Clip 2 (2:10-2:25)  ...  │  ← Clip list
└─────────────────────────────────────────────────────┘
```

## Components

### VideoPlayer.tsx

- Native `<video>` with custom controls
- Play/pause, volume, fullscreen
- Syncs with Timeline via `currentTime`
- Keyboard: Space (play/pause), ←/→ (seek 5s)

### Timeline.tsx

- Horizontal scrollable thumbnail strip (~120px tall)
- Playhead: vertical amber line
- Match regions: amber overlay positioned by start/end
- Interactions: drag to scrub, scroll to pan, wheel to zoom
- Time markers adapt to zoom level

### ClipList.tsx

- Checkbox list of matched clips
- Row format: `☑ 0:32 - 0:45 (13s) | Score: 94%`
- Click row → seek to start
- Hover → highlight on timeline
- Select All / Deselect All buttons

### SearchBar.tsx

- Text input with search icon
- Loading spinner during search
- Results update ClipList and Timeline

### Export Flow

- Dropdown: "Individual clips" or "Stitch into one"
- Progress modal during ffmpeg
- "Open folder" on complete

## CLI Integration

```bash
ve ui movie.mp4
```

Launches browser with video loaded. Index builds automatically if needed.

---

## Phase 2: Full Editor

Future enhancements after MVP:

### Drag Handles

- Left/right handles on clip regions
- Drag to adjust start/end times
- Snap to seconds (Shift for frame-precise)

### Manual Clip Creation

- Click + drag on timeline to create clip
- Or "Add clip" button enters selection mode
- Added to ClipList as "Custom clip"

### Clip Editing

- Double-click for inline time editing
- Context menu: Delete, Duplicate, Split at playhead

### Project Persistence

- Save/load as `.vclip` JSON files
- Auto-save to temp
- "Open recent" menu

### Waveform Overlay

- Audio waveform below thumbnails
- Helps identify speech/silence

```
Phase 2 Timeline:
┌─────────────────────────────────────────────────────────────┐
│ [thumb][thumb][MATCH========][thumb][thumb][NEW===][thumb]  │
│               ◄──handle  handle──►         ◄─────►          │
├─────────────────────────────────────────────────────────────┤
│ ▁▂▃▅▂▁▁▂▄▆▇▅▃▂▁▁▁▁▂▃▄▃▂▁▁▁▂▅▇▆▄▂▁▁▁▁▁▂▃▂▁▁▁▂▄▅▃▂▁▁▁▁▁▁▁▁▁│
├─────────────────────────────────────────────────────────────┤
│ ──────────────────●─────────────────────────────────────────│
└─────────────────────────────────────────────────────────────┘
```
